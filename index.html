

<!DOCTYPE html>
<html>

<head>

    <title>After School Club</title>


    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="lessons.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">

</head>

<body>
    <h1>After School Club</h1>

    <div id="app">

    
        <div v-if='showLesson'>

            <button @click='showCheckout' v-show='cartItemCount' >

                {{ cartItemCount }}
    
                <span class="fas fa-cart-plus"></span> Checkout
            </button>

            <div v-for="(bb,aa) in choice">

                <input type="radio" id="bb" name="bb" value="aa" @click="sorting(bb)">
                <label for="aa">{{aa}}</label>


            </div>
            <div>

                <input type="radio" id="order" name="order" value="order" @click="selectorder('true')">
                <label for="order">Ascending/Descending</label>


            </div>



            <div v-for="item in lessons">


                <h2 v-text="item.subject"></h2>
                <img v-bind:src="item.image" height="150">
                <p>Location: {{item.location}}</p>
                <p>Price: {{item.price}}</p>
                <p>Number of spaces: {{item.availableInventory }}</p>
                
                <div>
                    <span v-for='n in item.rating'>★</span>
                    <span v-for='n in 5-item.rating'>☆</span>
    
                </div>
                

                <button v-if="item.availableInventory>0" @click='addToCart(item)'>Add to cart</button>
                <button v-else  disabled='disabled' >Add to cart</button>
               
                    

            </div>




        </div>
        <div v-else>
            <h2>Checkout</h2>
 
            <button @click='showCheckout'  >

                {{ cartItemCount }}
    
                <span class="fas fa-cart-plus"></span> Checkout
            </button>
            

                <div v-for="item in cart" :key = "item.id">

                    <h2 v-text="item.id"></h2>
                    <img v-bind:src="item.image" height="150">
                    <p>Location: {{item.location}}</p>
                    <p>Price: {{item.price}}</p>

                    <button @click='removeItem(item)'>Delete from cart</button>
    
                </div>
               

                

                   

            
                


            


            <p>
                <strong>First Name:</strong>

                <input v-model="submitorder.firstName" />
            </p>
            <p>
                <strong>Last Name:</strong>

                <input v-model="submitorder.lastName" />
            </p>
            <h2>Order Information</h2>
            <p>First Name: {{submitorder.firstName}}</p>
            <p>Last Name: {{submitorder.lastName}}</p>

            <button v-on:click="submitForm">Place
                Order</button>

        </div>





    </div>


    <script>

        let app = new Vue({

            el: '#app',
            data: {
                choice: {

                    Price: 'price',
                    Subject: 'subject',
                    Location: 'location',
                    Available: 'availableInventory'


                },
                submitorder: {

                    firstName: '',
                    lastName: '',

                },
                showLesson: true,

                order: 'false',



                lessons: lessons,


          

                    cart: [],
       

            },
            methods: {
                
                removeItem(item) {
                    {

                        
                        this.cart.splice(item, 1);
                        ++item.availableInventory
                        
                    }

                },


                showCheckout() 
                {
                    this.showLesson = this.showLesson ? false : true;


                },
                selectorder(order) {

                    if (order === 'true') {

                        return this.lessons.reverse()

                    }

                },


                addToCart(item) {

                    this.cart.push(item);
                    --item.availableInventory
                },


                cartCount(id) {
                    let count = 0;
                    for (let i = 0; i < this.cart.length; i++) {
                        if (this.cart[i] === id) {
                            count++;
                        }
                    }
                    return 0;
                },

                sorting(chosenvalue) {

                    this.order = "false";

                    if (chosenvalue === "price") {

                        function compare(a, b) {

                            if (a.price > b.price) return 1;
                            if (a.price < b.price) return -1;

                        }
                        return this.lessons.sort(compare);

                    }
                    if (chosenvalue === "availableInventory") {

                        function compare(a, b) {

                            if (a.availableInventory > b.availableInventory) return 1;
                            if (a.availableInventory < b.availableInventory) return -1;

                        }
                        return this.lessons.sort(compare);
                    }
                    if (chosenvalue === "location") {

                        function compare(a, b) {

                            if (a.location > b.location) return 1;
                            if (a.location < b.location) return -1;

                        }
                        return this.lessons.sort(compare);

                    }
                    if (chosenvalue === "subject") {

                        function compare(a, b) {

                            if (a.subject > b.subject) return 1;
                            if (a.subject < b.subject) return -1;

                        }
                        return this.lessons.sort(compare);

                    }
                },
                submitForm() {

                    alert('Order submitted!')


                },



            },



            computed: {
                cartItemCount: function () {

                    return this.cart.length;
                },



            }



        })
            ;

    </script>

</body>

</html>
